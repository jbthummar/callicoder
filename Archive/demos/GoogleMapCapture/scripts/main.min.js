!function () { $(document).ready(function () { function t() { var t = $(".gm-style>div:first>div").css("transform"), e = t.split(","), n = parseFloat(e[4]), a = parseFloat(e[5]); $(".gm-style>div:first>div").css({ transform: "none", left: n, top: a }), $(".gmnoprint").each(function () { this.attributes.skipelement = !0 }), html2canvas($("#googleMap")[0], { logging: !1, useCORS: !0, sourceElement: $("#googleMap")[0], onrendered: function (e) { console.log(e.toDataURL()), o(e.toDataURL()), $(".gm-style>div:first>div").css({ left: "", top: "", transform: t }), $(".gmnoprint").each(function () { this.attributes.skipelement = !1 }) } }) } function e() { { var e = { center: new google.maps.LatLng(51.508742, -.12085), zoom: 5, mapTypeId: google.maps.MapTypeId.ROADMAP }; new google.maps.Map(document.getElementById("googleMap"), e) } $("#button-capture").on("click", t) } function o(t) { var e = "Mywindow", o = "http://www.callicoder.com/demos/GoogleMapCapture/draw.php", n = { imageData: t }, a = document.createElement("form"); a.setAttribute("method", "post"), a.setAttribute("action", o), a.setAttribute("target", e); for (var i in n) if (n.hasOwnProperty(i)) { var r = document.createElement("input"); r.type = "hidden", r.name = i, r.value = n[i], a.appendChild(r) } document.body.appendChild(a), window.open("", e), a.target = e, a.submit(), document.body.removeChild(a) } e() }) }();