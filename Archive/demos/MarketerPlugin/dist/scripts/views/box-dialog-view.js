!function (e) { "use strict"; var o = Backbone.View.extend({ _elmContainment: null, boxModel: null, _dialog: null, idPrefix: "boxdialog", _elmBorderColor: null, _elmBackgroundColor: null, _elmBorderStyle: null, _elmBorderWidth: null, _elmBorderRadius: null, _regExColor: /^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/i, initialize: function (e) { this._elmContainment = e.containment, this.boxModel = e.boxModel, this.render(e), this._precacheElements() }, setModel: function (e) { this.boxModel = e }, openDialog: function () { if (this.boxModel) { var e = this.boxModel; this._elmBorderColor.val(e.get("border-color")), this._elmBackgroundColor.val(e.get("background-color")), this._elmBorderStyle.val(e.get("border-style")), this._elmBorderWidth.val(e.get("border-width")), this._elmBorderRadius.val(e.get("border-radius")) } this._dialog.dialog("open") }, closeDialog: function () { this._dialog.dialog("close") }, render: function () { var e = MarketerPlugin.Templates.boxDialog, o = { idPrefix: this.idPrefix }, t = $(e(o).trim()); this.setElement(t) }, _precacheElements: function () { this._elmBorderColor = this.$("." + this.idPrefix + "-border-color"), this._elmBackgroundColor = this.$("." + this.idPrefix + "-background-color"), this._elmBorderStyle = this.$("." + this.idPrefix + "-border-style"), this._elmBorderWidth = this.$("." + this.idPrefix + "-border-width"), this._elmBorderRadius = this.$("." + this.idPrefix + "-border-radius") }, attachEvents: function () { this._createDialog(), this._attachEventsOnFields() }, _createDialog: function () { var e = this; this._dialog = $("#" + this.idPrefix + "-dialog").dialog({ height: 350, width: 400, resizable: !1, position: { my: "left top", at: "left center", of: this._elmContainmant }, buttons: { Save: function () { $(this).dialog("close") }, Cancel: function () { $(this).dialog("close") } }, open: function (o) { var t = $(o.target).parent(); t.draggable("option", "containment", e._elmContainment), $(this).dialog("option", "position", { my: "left top", at: "left center", of: this._elmContainmant }) } }) }, _attachEventsOnFields: function () { var e, o = this; this._elmBorderColor.on("change", function () { e = o._elmBorderColor.val(), o._regExColor.test(e) && o.boxModel.set("border-color", e) }), this._elmBackgroundColor.on("change", function () { e = o._elmBackgroundColor.val(), o._regExColor.test(e) && o.boxModel.set("background-color", e) }), this._elmBorderStyle.on("change", function () { e = o._elmBorderStyle.val(), o.boxModel.set("border-style", e) }), this._elmBorderWidth.on("change", function () { var t = parseInt(o._elmBorderWidth.attr("min")), i = parseInt(o._elmBorderWidth.attr("max")); e = o._elmBorderWidth.val(), e >= t && i >= e && o.boxModel.set("border-width", e) }), this._elmBorderRadius.on("change", function () { var t = parseInt(o._elmBorderRadius.attr("min")), i = parseInt(o._elmBorderRadius.attr("max")); e = o._elmBorderRadius.val(), e >= t && i >= e && o.boxModel.set("border-radius", e) }) } }, {}); e.BoxDialogView = o }(MarketerPlugin.Views);